"use strict";(self.webpackChunkperformance=self.webpackChunkperformance||[]).push([[105],{8800:function(e,t,n){n.d(t,{c:function(){return o},d:function(){return a}});var r=n(7890),a=n(1912).Z.create({baseURL:{NODE_ENV:"production",PUBLIC_URL:"/amazon-cloudwatch-agent",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_DYNAMODB_URL,timeout:3e3,headers:{"x-api-key":{NODE_ENV:"production",PUBLIC_URL:"/amazon-cloudwatch-agent",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_DYNAMODB_TOKEN},responseType:"json",maxRedirects:21}),o=new r.v({auth:{NODE_ENV:"production",PUBLIC_URL:"/amazon-cloudwatch-agent",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_GITHUB_SECRET_TOKEN})},1418:function(e,t,n){n.d(t,{DQ:function(){return r},Z8:function(){return i},fr:function(){return o},m_:function(){return s},tF:function(){return a},xm:function(){return c}});var r=["statsd","logs","disk"],a=["procstat_cpu_usage","procstat_memory_rss"],o=[100,1e3,5e3],i="aws",s="AmazonCloudWatchAgent",c={procstat_cpu_usage:"CPU Usage",procstat_memory_rss:"Memory Resource",procstat_memory_swap:"Memory Swap",procstat_memory_vms:"Virtual Memory",procstat_memory_data:"Swap Memory",procstat_num_fds:"File Descriptors",procstat_write_bytes:"Write Disk Bytes",net_bytes_sent:"Net Bytes Sent",net_packets_sent:"Net Packages Sent"}},105:function(e,t,n){n.r(t),n.d(t,{default:function(){return W}});var r=n(4165),a=n(1413),o=n(7762),i=n(5861),s=n(9439),c=n(1614),u=n(3239),l=n(890),d=n(9281),m=n(5527),p=n(9836),f=n(3382),_=n(5855),v=n(8745),h=n(8559),x=n(9891),S=n(4554),b=n(3967),g=n(9286),T=n.n(g),E=n(2426),F=n.n(E),y=n(2791),C=n(3496),Z=n(1418),w=n(9690),D=n(8800);function O(){return A.apply(this,arguments)}function A(){return(A=(0,i.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=F()().unix(),e.abrupt("return",P({TableName:{NODE_ENV:"production",PUBLIC_URL:"/amazon-cloudwatch-agent",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_DYNAMODB_NAME,Limit:25*Z.DQ.length,IndexName:"ServiceDate",KeyConditions:{Service:{ComparisonOperator:"EQ",AttributeValueList:[{S:Z.m_}]},CommitDate:{ComparisonOperator:"LE",AttributeValueList:[{N:t.toString()}]}},ScanIndexForward:!1}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e){return R.apply(this,arguments)}function R(){return(R=(0,i.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",D.d.post("/",{Action:"Query",Params:t}).then((function(e){var t;return null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.Items})).catch((function(e){return Promise.reject(e)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e){return N.apply(this,arguments)}function N(){return(N=(0,i.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",D.c.request("GET /repos/{owner}/{repo}/commits/{ref}",{owner:Z.Z8,repo:{NODE_ENV:"production",PUBLIC_URL:"/amazon-cloudwatch-agent",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_GITHUB_REPOSITORY,ref:t}).then((function(e){return Promise.resolve(null===e||void 0===e?void 0:e.data)})).catch((function(e){return Promise.reject(e)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(){var e=(0,b.Z)();return{chart:{type:"line",toolbar:{show:!0,offsetX:-100,offsetY:5,tools:{selection:!1,zoom:!1,zoomin:!1,zoomout:!1,pan:!1}},events:{xAxisLabelClick:function(e,t,n){var r=n.globals.categoryLabels.at(n.labelIndex);window.location.assign("https://github.com/".concat(Z.Z8,"/").concat({NODE_ENV:"production",PUBLIC_URL:"/amazon-cloudwatch-agent",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_GITHUB_REPOSITORY,"/commit/").concat(r))}}},xaxis:{labels:{rotateAlways:!0,rotate:-45,style:{colors:["light"===e.palette.mode?"#212121":"#FFFFFF"],fontSize:"12px"},offsetX:10,offsetY:5},tooltip:{enabled:!1},title:{text:"Commit Sha",style:{color:"light"===e.palette.mode?"#212121":"#FFF",fontSize:"14px"},offsetY:-20}},colors:["#FF6384","#FF9F40","#FFCD56","#0ED87C","#4BC0C0","#36A2EB","#9965FF","#996255","#DF358D","#DF358D"],yaxis:{min:0,max:300,labels:{style:{colors:["light"===e.palette.mode?"#212121":"#FFFFFF"]}},title:{style:{color:"light"===e.palette.mode?"#212121":"#FFF",fontSize:"14px"}}},tooltip:{intersect:!0,shared:!1,followCursor:!0,onDatasetHover:{highlightDataSeries:!0},x:{show:!1}},grid:{show:!0,xaxis:{lines:{show:!0}},yaxis:{lines:{show:!0}}},legend:{position:"right",showForSingleSeries:!0,markers:{width:20,radius:2},offsetX:-40,offsetY:40,itemMargin:{horizontal:5,vertical:0},labels:{colors:["light"===e.palette.mode?"#212121":"#FFFFFF"]}},markers:{size:5},title:{align:"center",offsetX:-30,style:{color:"light"===e.palette.mode?"#212121":"#FFF",fontSize:"20px"}}}}var L=n(184);function W(){var e;(0,w.o)({title:"Amazon CloudWatch Agent"});var t=(0,b.Z)(),n=function(){var e=y.useState({last_update:void 0,hash_categories:[],trend_data:[],commits_information:[]}),t=(0,s.Z)(e,2),n=t[0],c=t[1];return y.useEffect((function(){(0,i.Z)((0,r.Z)().mark((function e(){var t,n,i,s,u,l,d,m,p,f;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O();case 2:if(null!=(n=e.sent)&&0!==n.length){e.next=5;break}return e.abrupt("return");case 5:return i=[],s=(null===(t=n.at(0))||void 0===t?void 0:t.CommitDate.N)||"",u=Array.from(new Set(n.map((function(e){return e.CommitHash.S.substring(0,6)})))).reverse(),e.next=10,Promise.all(u.map((function(e){return k(e)})));case 10:l=e.sent,d=l.map((function(e){return{commiter_name:e.author.login,commit_message:e.commit.message,commit_date:e.commit.committer.date,sha:e.sha.substring(0,6)}})),m=(0,o.Z)(Z.tF),e.prev=13,f=(0,r.Z)().mark((function e(){var t,a,s,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=p.value,a=(0,o.Z)(Z.fr),e.prev=2,c=(0,r.Z)().mark((function e(){var a,c,u,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=s.value,c=(0,r.Z)().mark((function e(){var s,c,d,m,p,f;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=l[u],0!==(c=n.filter((function(e){return e.DataType.S===s}))).length){e.next=4;break}return e.abrupt("return","continue");case 4:d=[],m=(0,o.Z)(Z.DQ),e.prev=6,f=(0,r.Z)().mark((function e(){var n,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=p.value,0!==(o=c.reverse().filter((function(e){return e.UseCase.S===n})).map((function(e){var n;return Number(Number(null===(n=e.Results.M[a].M[t].M.Average)||void 0===n?void 0:n.N).toFixed(2))}))).length){e.next=4;break}return e.abrupt("return","continue");case 4:d.push({name:n,data:o});case 5:case"end":return e.stop()}}),e)})),m.s();case 9:if((p=m.n()).done){e.next=16;break}return e.delegateYield(f(),"t0",11);case 11:if("continue"!==e.t0){e.next=14;break}return e.abrupt("continue",14);case 14:e.next=9;break;case 16:e.next=21;break;case 18:e.prev=18,e.t1=e.catch(6),m.e(e.t1);case 21:return e.prev=21,m.f(),e.finish(21);case 24:i.push({name:t,data_type:s,data_tpm:a,data_series:d.reverse()});case 25:case"end":return e.stop()}}),e,null,[[6,18,21,24]])})),u=0,l=["metrics","traces","logs"];case 3:if(!(u<l.length)){e.next=11;break}return e.delegateYield(c(),"t0",5);case 5:if("continue"!==e.t0){e.next=8;break}return e.abrupt("continue",8);case 8:u++,e.next=3;break;case 11:case"end":return e.stop()}}),e)})),a.s();case 5:if((s=a.n()).done){e.next=9;break}return e.delegateYield(c(),"t0",7);case 7:e.next=5;break;case 9:e.next=14;break;case 11:e.prev=11,e.t1=e.catch(2),a.e(e.t1);case 14:return e.prev=14,a.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[2,11,14,17]])})),m.s();case 16:if((p=m.n()).done){e.next=20;break}return e.delegateYield(f(),"t0",18);case 18:e.next=16;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(13),m.e(e.t1);case 25:return e.prev=25,m.f(),e.finish(25);case 28:c((function(e){return(0,a.Z)((0,a.Z)({},e),{},{trend_data:i,hash_categories:u,commits_information:d,last_update:F().unix(Number(s)).format("dddd, MMMM Do, YYYY h:mm:ss A")})}));case 29:case"end":return e.stop()}}),e,null,[[13,22,25,28]])})))()}),[c]),[n,c]}(),g=(0,s.Z)(n,1)[0],E=g.last_update,D=g.hash_categories,A=g.trend_data,P=g.commits_information,R=function(){var e=y.useState({data_type:"Metrics"}),t=(0,s.Z)(e,2),n=t[0],r=t[1];return[n,r]}(),N=(0,s.Z)(R,2),W=N[0].data_type,H=N[1],U=D.map((function(){return"light"===t.palette.mode?"#212121":"#FFF"}));return E?(0,L.jsxs)(c.Z,{sx:{py:"5vh",border:"1px solid"},maxWidth:"lg",children:[(0,L.jsx)(c.Z,{sx:{mb:4},children:(0,L.jsxs)(l.Z,{sx:{mb:2,fontWeight:"bold"},variant:"h2",children:["Performance Trend",(0,L.jsx)("hr",{})]})}),(0,L.jsxs)(c.Z,{sx:{mb:4},children:[(0,L.jsx)(d.Z,{sx:{position:"relative",mb:4,display:"flex",justifyContent:"center",boxShadow:"unset"},component:m.Z,children:(0,L.jsx)(p.Z,{sx:{borderStyle:"solid",width:"fit-content",overflow:"hidden"},size:"small","aria-label":"a dense table",children:(0,L.jsx)(f.Z,{children:null===(e=["Last Updated","Data type"])||void 0===e?void 0:e.map((function(e){return(0,L.jsxs)(_.Z,{children:[(0,L.jsx)(v.Z,{sx:{border:"1px solid #000",fontWeight:"bold"},children:e}),(0,L.jsx)(v.Z,{sx:{border:"1px solid #000",textAlign:"center"},children:"Last Updated"===e?(0,L.jsx)(l.Z,{variant:"h4",children:E}):(0,L.jsxs)(h.Z,{sx:{height:"38px"},value:W,onChange:function(e){return H({data_type:e.target.value})},children:[(0,L.jsx)(x.Z,{value:"Metrics",children:"Metric"}),(0,L.jsx)(x.Z,{value:"Logs",children:"Logs"})]})})]},e)}))})})}),(0,L.jsx)("hr",{})]}),(0,L.jsx)(c.Z,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:Z.tF.map((function(e){return Z.fr.map((function(t){var n,r;return(0,L.jsx)(S.Z,{sx:{mb:4},children:(0,L.jsx)(C.Z,{options:T()(j(),{xaxis:{categories:D,labels:{style:{colors:U}}},yaxis:{title:{text:"procstat_cpu_usage"===e?"Percent":"procstat_num_fds"===e?"":"MB"}},title:{text:"".concat(W," (TPM: ").concat(t,") - Avg ").concat(Z.xm[e])},tooltip:{custom:function(e){var t,n=e.ctx,r=e.series,a=e.seriesIndex,o=e.dataPointIndex,i=e.w,s=n.opts.colors.at(a)||"#000",c=null===(t=n.opts.series.at(a))||void 0===t?void 0:t.name,u=r[a][o],l=i.globals.categoryLabels[o],d=P.filter((function(e){return e.sha===l})).at(0),m=null===d||void 0===d?void 0:d.commit_message.replace(/\n\r*\n*/g,"<br />"),p=(null===d||void 0===d?void 0:d.commit_date)+" commited by @"+(null===d||void 0===d?void 0:d.commiter_name),f="<b>".concat(c,"</b>: ").concat(u);return'<div class="commit_box"><div class="mb"><b>'+(null===d||void 0===d?void 0:d.sha)+'</b></div><div class="mb bold"><b>'+m+'</b></div><div class="mb bold"><b>'+p+'</b></div><div class="f">'+'<div style="width: 25px; height: 10px; border: solid #fff 1px; background: '.concat(s,'"><div/>')+'<div class="ml">'.concat(f,"</div>")+"</div></div>"}}}),series:(null===(n=A.filter((function(n){return n.name===e&&n.data_type===W.toLowerCase()&&n.data_tpm===t})))||void 0===n||null===(r=n.at(0))||void 0===r?void 0:r.data_series)||[],type:"line",width:"800"})},"".concat(t).concat(e))}))}))})]}):(0,L.jsx)(c.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:(0,L.jsx)(u.Z,{color:"inherit"})})}},9690:function(e,t,n){n.d(t,{o:function(){return o}});var r=n(2791),a=n(7689);function o(e,t){var n=(0,a.TH)();r.useEffect((function(){var t=document.title;return document.title="/"===n.pathname&&null!==e&&void 0!==e&&e.title?"".concat(e.title," "):"AWS",function(){document.title=t}}),null!==t&&void 0!==t?t:[])}}}]);
//# sourceMappingURL=105.4df65087.chunk.js.map